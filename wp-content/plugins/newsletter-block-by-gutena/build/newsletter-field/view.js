!function(){document.addEventListener("DOMContentLoaded",(()=>{if(!window.gutenaNewsletterBlockLegacy)return;let n=document.querySelectorAll(".gutena-newsletter-field-block .gutena-newsletter-form");for(let s=0;s<n.length;s++)n[s]?.addEventListener("submit",(function(a){a.preventDefault();let l=n[s].closest(".gutena-newsletter-field-block"),r=l?.nextElementSibling,c=n[s].querySelector("#gutena-newsletter-field").value,o=n[s].querySelector("#gutena-newsletter-settings").value;if(r&&"undefined"!==r&&r.classList.contains("gutena-newsletter-message")&&r.remove(),!t(c))return void e(l,{textContent:gutenaNewsletterBlockLegacy.email_invalid,className:"gutena-newsletter-message status error"});e(l,{innerHTML:'<span class="loader"></span>'+gutenaNewsletterBlockLegacy.in_process,className:"gutena-newsletter-message success"});const u=new FormData;u.append("action","gutena_subscribe_newsletter"),u.append("nonce",gutenaNewsletterBlockLegacy.nonce),u.append("email",c),u.append("data",o),fetch(gutenaNewsletterBlockLegacy?.ajax_url,{method:"POST",credentials:"same-origin",body:u}).then((e=>e.json())).then((t=>{t&&(l?.nextElementSibling?.classList.contains("gutena-newsletter-message")&&l.nextElementSibling.remove(),"success"==t.status&&(l.querySelector("#gutena-newsletter-field").value=""),e(l,{textContent:t.message,className:"gutena-newsletter-message status "+t.status}))})).catch((t=>{e(l,{textContent:t,className:"gutena-newsletter-message error"})}))}))}));const e=(e,t)=>{e.after(Object.assign(document.createElement("div"),t))},t=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}();