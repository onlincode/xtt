var searchInput=document.getElementById("searchInput"),collumns=[{title:""}],table2AjaxData={nganhId:""},mainDom=document.getElementById("main-content"),table2IsProcessing=!1,div1=$(mainDom).find("#div1"),div2=$(mainDom).find("#div2"),table1=$("#table1").DataTable({lengthChange:!1,dom:"Brtp",pageLength:10,pagingType:"simple_numbers",responsive:{details:{display:$.fn.dataTable.Responsive.display.childRowImmediate,target:"",type:"none"}},search:{regex:!0,return:!0,search:searchInput.value},ajax:{url:"https://api.xettuyen.online/searching",type:"GET",data:function(t){}},serverSide:!0,autoWidth:!1,sorting:!1,processing:!0,columnDefs:[{targets:"_all",orderable:!1}],columns:[{title:"Mã ngành",data:"maNganh",width:"10%"},{title:"Ngành",data:"tenNganh",width:"80%"},{title:"",data:"id",width:"10%",render:function(t){return`<button type="button" class="myButton" onclick = "showDetails('${t}')">Xem</button>`}}],searching:!0,buttons:[{text:"Xét học bạ cấp 3",attr:{id:"closeBtn",titlle:"Hủy",class:"myButton"},action:alert},{text:"Xét Điểm thi THPT",attr:{id:"saveBtn",titlle:"Lưu",disabled:!0,class:"myButton"},action:alert},{text:"Xét thi năng lực",attr:{id:"deleteBtn",titlle:"Xóa",disabled:!0,class:"myButton"},action:alert}],rowGroup:{dataSrc:"tenTruong"},language:{emptyTable:"Không có dữ liệu",zeroRecords:"Không có dữ liệu",paginate:{previous:"<",next:">"},searchPlaceholder:"Tìm mọi thứ",search:""},oLanguage:{sSearch:"Tìm kiếm"},scrollToTop:!0,initComplete:function(t,e){searchInput.addEventListener("keyup",(function(t){var e;void 0!==t.key?e=t.key:void 0!==t.keyCode&&(e=String.fromCharCode(t.keyCode)),"Enter"!==e&&13!==t.keyCode||(t.preventDefault(),performSearch(this.value),this.disabled=!0)}))}}),table2=$("#table2").DataTable({paging:!1,searching:!1,info:!1,responsive:{details:{display:$.fn.dataTable.Responsive.display.childRowImmediate,target:"",type:"none"}},ajax:{url:"https://api.xettuyen.online/searchDetails",type:"GET",data:function(t){t.nganhId=table2AjaxData.nganhId},dataSrc:""},autoWidth:!1,sorting:!1,processing:!0,columnDefs:[{targets:"_all",orderable:!1}],columns:[{title:"Thứ tự",data:"thuTu",visible:!1},{title:"Phương thức",data:"tenPhuongThuc"},{title:"Tổ hợp",data:"cacToHop"}],orderFixed:[0,"asc"],buttons:[{text:"Đóng",attr:{id:"closeBtn",titlle:"Đóng",class:"myButton"},action:toggleDivs}],dom:"tB",layout:{bottomEnd:"buttons"}}),performSearch=$.fn.dataTable.util.throttle((function(t){table1.search(t).draw()}),400);function toggleDivs(){table2IsProcessing?(div2.toggle(),div1.fadeToggle(500)):(div1.toggle(),div2.fadeToggle(500))}function showDetails(t){table2IsProcessing||(table2IsProcessing=!0,0==t&&(window.location.href="https://api.xettuyen.online/auth/google"),table2AjaxData.nganhId=t,table2.ajax.reload(toggleDivs,!1))}table1.on("processing.dt",(function(t,e,a){document.getElementById("searchInput").disabled=!!a})),table2.on("processing.dt",(function(t,e,a){table2IsProcessing=a}));
