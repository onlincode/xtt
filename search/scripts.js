var searchInput=document.getElementById("searchInput"),collumns=[{title:""}],table2AjaxData={nganhId:""},mainDom=document.getElementById("main-content"),table2IsProcessing=!1,div1=$(mainDom).find("#div1"),div2=$(mainDom).find("#div2"),table1=$("#table1").DataTable({lengthChange:!1,dom:"Brtp",pageLength:10,pagingType:"simple_numbers",responsive:{details:{display:$.fn.dataTable.Responsive.display.childRowImmediate,target:"",type:"none"}},search:{regex:!0,return:!0,search:searchInput.value},ajax:{url:"https://api.xettuyen.online/searching",type:"GET",data:function(e){}},serverSide:!0,autoWidth:!1,sorting:!1,processing:!0,columnDefs:[{targets:"_all",orderable:!1}],columns:[{title:"Mã ngành",data:"maNganh",width:"10%"},{title:"Ngành",data:"tenNganh",width:"80%"},{title:"",data:"id",width:"10%",render:function(e){return`<button type="button" class="myButton" onclick = "showDetails('${e}')">Xem</button>`}}],searching:!0,rowGroup:{dataSrc:"tenTruong"},language:{emptyTable:"Không có dữ liệu",zeroRecords:"Không có dữ liệu",paginate:{previous:"<",next:">"},searchPlaceholder:"Tìm mọi thứ",search:""},oLanguage:{sSearch:"Tìm kiếm"},scrollToTop:!0,initComplete:function(e,t){searchInput.addEventListener("keyup",(function(e){var t;void 0!==e.key?t=e.key:void 0!==e.keyCode&&(t=String.fromCharCode(e.keyCode)),"Enter"!==t&&13!==e.keyCode||(e.preventDefault(),performSearch(this.value),this.disabled=!0)}))}}),table2=$("#table2").DataTable({paging:!1,searching:!1,info:!1,responsive:{details:{display:$.fn.dataTable.Responsive.display.childRowImmediate,target:"",type:"none"}},ajax:{url:"https://api.xettuyen.online/searchDetails",type:"GET",data:function(e){e.nganhId=table2AjaxData.nganhId},dataSrc:""},autoWidth:!1,sorting:!1,processing:!0,columnDefs:[{targets:"_all",orderable:!1}],columns:[{title:"Thứ tự",data:"thuTu",visible:!1},{title:"Phương thức",data:"tenPhuongThuc"},{title:"Tổ hợp",data:"cacToHop"}],orderFixed:[0,"asc"],buttons:[{text:"Đóng",attr:{id:"closeBtn",titlle:"Đóng",class:"myButton"},action:toggleDivs}],dom:"tB",layout:{bottomEnd:"buttons"}}),performSearch=$.fn.dataTable.util.throttle((function(e){table1.search(e).draw()}),400);function toggleDivs(){table2IsProcessing?(div2.toggle(),div1.fadeToggle(500)):(div1.toggle(),div2.fadeToggle(500))}function showDetails(e){table2IsProcessing||(table2IsProcessing=!0,0==e&&(window.location.href="https://api.xettuyen.online/auth/google"),table2AjaxData.nganhId=e,table2.ajax.reload(toggleDivs,!1))}table1.on("processing.dt",(function(e,t,a){document.getElementById("searchInput").disabled=!!a})),table2.on("processing.dt",(function(e,t,a){table2IsProcessing=a}));
